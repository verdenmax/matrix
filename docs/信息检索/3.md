# 文档评分、词项权重计算及向量空间模型

## 排序式检索

对查询和文档匹配程度进行排序，即给出一个查询和文档匹配评分。

是自由文本查询。可以解决返回结果过少或过多的问题，重要的是把相关的结果排在前面。

!!! note "Jaccard系数"

    计算两个集合重合度。

    A 和 B 是两个集合，则 $JACCARD(A,B) = \frac{A \cap B}{A \cup B}$

    但是查询文档词项重合度并不一定与文档相关性一致。因为忽略了词项之间重要性的查询，不同词的重要性不同。

    不足：不考虑词项频率，没有考率罕见词比高频词的信息量更大，没有仔细考虑文档的长度因素。


!!! note "词项频率"

    对于一个词项，该词项不出现在文档中则得分为0，出现越多得分越多。这就是词项频率 term frequency tf评分。

    非二值关联矩阵就是矩阵中记录的是 tf。

词袋模型：不考虑词在文档中出现顺序。BOW模型。

$tf_{t,d}$ 代表t在d中出现次数，可以认为是文档内代表度量的一个量，也可以认为是局部信息。

这里使用 $w_{t,d} = 1 + logtf_{t,d}$ 来代替。文档-词项匹配得分是同时出现在q和文档d中的词项的对数词频之和。

词项t的文档集频率 cf：文档集中出现词项t的个数。

词项t的文档频率df：包含t的文档篇数。

$df_t$ 是出现词项t的文档数目。这个值是和词项t的信息量（其实就是稀有度）成反比。

定义词项t的idf权重 $idf_t=log_{10}\frac{N}{df_t}$。N是文档集中文档数目。这个是反映词项t的信息量的一个指标，是一种全局性指标，反应的是词项在全局的重要性。

对于单词项查询，idf对文档排序没有任何影响。idf会影响至少包含2个词项查询的文档排序结果。

tf-idf 权重，是tf权重和idf权重的乘积。$w_{t,d} = (1 + log tf_{t,d})log\frac{N}{df_t}$。该值随着词项频率的增大而增大（局部信息）；随着词项罕见度的增大而增大（全局信息）。

## 向量空间模型

其实就是 tf-idf 矩阵模型。

每篇文档表示为一个基于tf-idf权重的实值向量。

对于查询，表示为同一高维空间的向量。

相似度，不采用欧式距离，使用夹角。使用余弦 $cos(q,d) = \frac{q*d}{|q|*|d|}$

如果两个向量归一化之后，则余弦相似度就是点积。
